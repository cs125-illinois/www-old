<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<title>A Knight&apos;s Tour</title>
		<meta name="description" lang="en-us" content="Implement a recursive algorithm to tour a chess board and get started on MP4!">
    <meta name="google-site-verification" content="y_Y-3Qy2OkNZGt3FSNhmY31PkAtFbaTGrDKrSZffbvE">

      <link rel="stylesheet" href="/static-assets/site.5d50e612382221d54d3a.css">

      <script src="/static-assets/site.5d50e612382221d54d3a.js" async></script>

		<link rel="icon" type="image/png" sizes="228x228" href="/img/favicon/coast-228x228.png">
		<link rel="yandex-tableau-widget" href="/img/favicon/yandex-browser-manifest.json">
		<link rel="apple-touch-icon" sizes="57x57" href="/img/favicon/apple-touch-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="/img/favicon/apple-touch-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="/img/favicon/apple-touch-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="/img/favicon/apple-touch-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="/img/favicon/apple-touch-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="/img/favicon/apple-touch-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="/img/favicon/apple-touch-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="/img/favicon/apple-touch-icon-152x152.png">
		<link rel="apple-touch-icon" sizes="180x180" href="/img/favicon/apple-touch-icon-180x180.png">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
		<meta name="apple-mobile-web-app-title" content="CS 125">
		<link rel="icon" type="image/png" sizes="32x32" href="/img/favicon/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/img/favicon/favicon-16x16.png">
		<link rel="shortcut icon" href="/img/favicon/favicon.ico">
		<link rel="manifest" href="/img/favicon/manifest.json">
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="theme-color" content="#fff">
		<meta name="application-name" content="CS 125">
		<meta name="msapplication-TileColor" content="#fff">
		<meta name="msapplication-TileImage" content="/img/favicon/mstile-144x144.png">
		<meta name="msapplication-config" content="/img/favicon/browserconfig.xml">
		
    <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js" defer></script>

    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-45109275-2', 'auto');
      ga('send', 'pageview');
    </script>
    <script async src="https://www.google-analytics.com/analytics.js"></script>
    <script>
      if (window.location.hostname === 'localhost') {
        window['ga-disable-UA-45109275-2'] = true
      }
    </script>
  </head>

  <body data-spy="scroll" data-target="#toc">
    <div id="navbarTop" class="fixed-top">
      <nav class="navbar navbar-expand navbar-light bg-white pb-2 flex-column flex-md-row">
        <a class="navbar-brand" href="/">
          <img src="/img/logos/cs125-wide-157x60.png" width="157" height="60" data-pagespeed-no-transform="true" class="d-none d-lg-inline-block align-top" alt="CS 125: Introduction to Computer Science">
          <img src="/img/logos/cs125-60x60.png" width="46" height="46" data-pagespeed-no-transform="true" class="d-inline-block d-lg-none align-top" alt="CS 125: Introduction to Computer Science">
        </a>
        <button id="sidebar-button" type="button" data-toggle="collapse" data-target="#sidebar" aria-controls="sidebar" aria-expanded="false" aria-label="Toggle navigation" class="d-block d-md-none" style="position: fixed; top: 20px; right: 20px;">
          <span class="navbar-toggler-icon"></span>
        </button>
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="/info/syllabus/">Info</a>
          </li>
          <li class="nav-item">
            <a class="nav-link noexternal" href="https://cs125-forum.cs.illinois.edu">Forum</a>
          </li>
          <li class="nav-item">
            <a class="nav-link noexternal" href="https://cs125-help.cs.illinois.edu">Help</a>
          </li>
          <!--
          <li class="nav-item">
            <a class="nav-link"
               href="/info/fair/"
               data-active="^info/fair"><strong>Fair</strong></a>
          </li>
          <li class="nav-item">
            <a class="nav-link"
               href="/info/join/"
               data-active="^(?!info/join)info">Join</a>
          </li>
          -->
          <li class="nav-item">
            <a class="nav-link" href="/learn/">Learn</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/info/people/">People</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-redirect="/MP" href="/MP/5/">MPs</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" data-redirect="/lab" href="/lab/14/">Labs<span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/m/grades/">Grades</a>
          </li>
        </ul>
        <ul class="navbar-nav ml-auto mr-2">
          <li id="login" class="d-flex mr-2 mr-xl-3"></li>
          <li class="d-none d-md-flex nav-item mr-2 mr-xl-3">
            <a href="//www.youtube.com/channel/UC8L44j0A6LAlC4FM8IiNx-w/videos" target="_blank" class="noexternal"><i class="fa fa-youtube-play fa-2x navbar-icon" aria-hidden="true"></i></a>
          </li>
          <li class="d-none d-md-flex nav-item">
            <a href="//github.com/cs125-illinois" target="_blank" class="noexternal"><i class="fa fa-github fa-2x navbar-icon" aria-hidden="true"></i></a>
          </li>
        </ul>
      </nav>
      <div class="fadeout"></div>
    </div>
    
    <!--
      vim: et:ts=2:sw=2:ft=html
    -->

<!--
  vim: et:ts=2:sw=2:ft=html
-->

<div id="content" class="container-fluid">
  <div class="row flex-xl-nowrap">
    <div class="col-12 col-md-3 col-xl-2 sidebar">
      <div id="sidebar" class="collapse">
        <nav class="nav flex-column">
          <ul class="section-nav small">
            <li class="entry">
              <strong>Spring 2019</strong>
            </li>
            <li>
              <a href="/lab/2019/spring/14/">14: Final Project Demos</a>
            </li>
            <li>
              <a href="/lab/2019/spring/13/">13: Final Project Checkpoint</a>
            </li>
            <li>
              <a href="/lab/2019/spring/12/">12: Final Project UI</a>
            </li>
            <li>
              <a href="/lab/2019/spring/11/">11: Sorting and Searching</a>
            </li>
            <li>
              <a href="/lab/2019/spring/10/" class="active" onclick="return false;">10: A Knight&apos;s Tour<span class="sr-only">(current)</span></a>
            </li>
            <li>
              <a href="/lab/2019/spring/8/">8: Escape the Maze</a>
            </li>
            <li>
              <a href="/lab/2019/spring/7/">7: Data Modeling</a>
            </li>
            <li>
              <a href="/lab/2019/spring/6/">6: Testing</a>
            </li>
            <li>
              <a href="/lab/2019/spring/5/">5: Reverse Engineering</a>
            </li>
            <li>
              <a href="/lab/2019/spring/3/">3: Strings</a>
            </li>
            <li>
              <a href="/lab/2019/spring/2/">2: Algorithms</a>
            </li>
            <li>
              <a href="/lab/2019/spring/1/">1: Debugging and More Android Setup</a>
            </li>
            <li>
              <a href="/lab/2019/spring/0/">0: Ready to Start</a>
            </li>
            <li>
              <strong><a href="/lab/">Return to Current Labs</a></strong>
            </li>
          </ul>
          
          <!--
            vim: et:ts=2:sw=2:ft=html
          -->
        </nav>
        <div class="fadeout"></div>
      </div>
    </div>
    <div class="col-md-3 col-xl-2" style="z-index: -1;"></div>

    <div class="col-xl-3 d-none d-xl-block toc">
      <nav id="toc" class="nav flex-column">
        <ul class="section-nav">
          <li class="entry">
            <a class="nav-link" href="#top">1. Recursion (110 Minutes)</a>
            <ul>
              <li><a class="nav-link" href="#_the_knights_tour">1.1. The Knight&#x2019;s Tour</a></li>
              <li><a class="nav-link" href="#_open_and_closed_tours">1.2. Open and Closed Tours</a></li>
              <li><a class="nav-link" href="#_warnsdorffs_rule">1.3. Warnsdorff&#x2019;s Rule</a></li>
            </ul>
          </li>
          <li class="entry">
            <a class="nav-link" href="#mp4">2. MP4 (Remaining Time)</a>
          </li>
          <li class="entry">
            <a class="nav-link" href="#done">3. Before You Leave</a>
          </li>
        </ul>
      </nav>
    </div>

    <main class="col-12 col-md-9 col-xl-7 py-3">

      <div id="outdated" class="alert alert-danger" role="alert">
        <h4 class="alert-heading">Warning: Outdated Content</h4>
        <p>This lab is from a previous version of CS 125.
          <a href="/lab/">Click here</a> to access the latest
          version.
        </p>
      </div>

      <a class="anchor" id="top"></a>
        <h1>A Knight&apos;s Tour</h1>
      <div class="paragraph lead">
<p>This lab continues our discussion of recursion&#x2014;a powerful new problem
solving tool.
You&#x2019;ll develop a recursive algorithm to explore a chess board and implement it
in Java.</p>
</div>
<div class="sect1">
<a class="anchor" id="recursion"></a><h2>1. Recursion <span class="text-muted">(110 Minutes)</span></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Recursion is an important and powerful programming tool.
At times, it can be the only way to elegantly solve a particular programming
problem.
But it is also a hard concept to wrap your head around.</p>
</div>
<div class="paragraph">
<p>In class we&#x2019;ve seen recursion on trees, and will soon see the same idea applied
to lists and arrays.
<a href="/MP/2019/spring/4/">MP4</a> introduces you to recursion on graphs&#x2014;another powerful
and ubiquitous data structure.</p>
</div>
<div class="sect2">
<a class="anchor" id="_the_knights_tour"></a><h3>1.1. The Knight&#x2019;s Tour</h3>
<div class="paragraph">
<p>But today&#x2019;s lab introduces you to recursion on a <em>chess board</em>.
The problem we&#x2019;ll be solving today is a classic known as the
<a href="https://en.wikipedia.org/wiki/Knight%27s_tour" target="_blank" class="external">Knight&#x2019;s Tour</a>.
The goal is to visit <em>every</em> square on a rectangular board <em>once</em> using the
knight from chess, which moves in a distinctive
<a href="https://en.wikipedia.org/wiki/Knight_(chess)" target="_blank" class="external">L shape</a>.
(Please review the Wikipedia article if you aren&#x2019;t familiar with chess or with
this particular piece&#x2014;or ask a neighbor.)</p>
</div>
<div class="paragraph">
<p>We&#x2019;re doing this problem for two reasons.
First, it&#x2019;s really interesting.
But second, and most importantly, it will help you get started on
<a href="/MP/2019/spring/4/">MP4</a>, since touring the chess board is akin to graph exploration.</p>
</div>
<div class="paragraph">
<p>This may seem like a strange problem to approach recursively.
But let&#x2019;s apply our usual strategy.</p>
</div>
<div class="sect3">
<a class="anchor" id="_base_case"></a><h4>1.1.1. Base case</h4>
<div class="paragraph">
<p>There are actually <em>two</em> bases cases, one indicating success and one
indicating failure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Success:</strong> if we have successfully visited all squares we are done and can
stop.</p>
</li>
<li>
<p><strong>Failure:</strong> if we end up on a square where all moves would take us to squares
that we have already visited, we are stuck and <em>this particular</em> path did not
work out.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<a class="anchor" id="_recursive_step"></a><h4>1.1.2. Recursive step</h4>
<div class="paragraph">
<p>How do we make the problem smaller?
Well, given an MxN board, a tour has to take M * N steps.
So if we take one move in any direction we are a bit closer to finishing the
tour!
Given a position on the board, we have several smaller subproblems to
solve&#x2014;we need to see if we can visit all remaining squares from each of
our neighbors.
Since we have visited our current location, each subproblem also represents a
board with fewer squares to visit, and so a smaller problem.</p>
</div>
</div>
<div class="sect3">
<a class="anchor" id="_combine_results"></a><h4>1.1.3. Combine results</h4>
<div class="paragraph">
<p>How do we combine results from multiple moves in different directions?
Here the idea is simple: just use the first direction that results in a valid
tour of the board.</p>
</div>
</div>
<div class="sect3">
<a class="anchor" id="_pseudocode"></a><h4>1.1.4. Pseudocode</h4>
<div class="paragraph">
<p>Before we start with our Java code let&#x2019;s jot down some pseudocode for our tour
algorithm:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="spelling_exception">if all squares are visited:
  return the board with the current successful tour
for all valid moves we can make:
  if the move takes us to a square we&apos;ve visited:
    continue
  copy the current board
  make the move on the copied board
  restart the tour on the copied board
  if the tour completes succesfully:
    return that board
  otherwise:
    try the next move
if we reach here we didn&apos;t find a move that worked, so return failure</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<a class="anchor" id="_open_and_closed_tours"></a><h3>1.2. Open and Closed Tours</h3>
<div class="paragraph">
<p>We can also distinguish between two kinds of Knight&#x2019;s tours.
An <strong>open tour</strong> can end anywhere.
But a closed tour has to link up with the start&#x2014;meaning that it forms a
loop that the knight could continue forever <span class="badge badge-illinois-orange" data-toggle="popover" data-placement="top" data-html="true" data-content="&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;although you&amp;#x2019;d think that they would get bored eventually&amp;#x2026;&amp;#x200B;&lt;/body&gt;&lt;/html&gt;">1</span>.</p>
</div>
<div class="paragraph">
<p>As a challenge problem on today&#x2019;s lab homework we&#x2019;ll have you try and implement
a <em>closed</em> tour starting with your solution to the open tour algorithm.
It&#x2019;s not a huge change, but you may find it tricky.</p>
</div>
</div>
<div class="sect2">
<a class="anchor" id="_warnsdorffs_rule"></a><h3>1.3. Warnsdorff&#x2019;s Rule</h3>
<div class="paragraph">
<p>Finally, even though our recursive algorithm works reasonably well, we can help
optimize it using a <em>heuristic</em> called
<a href="https://en.wikipedia.org/wiki/Knight%27s_tour#Warnsdorff&#x2019;s_rule" target="_blank" class="external">Warnsdorff&#x2019;s
rule</a>.
It states that, if we have multiple options of valid moves, we should choose the
one that results in the <em>smallest</em> number of next moves.
While counterintuitive, it allows us to solve the Knight&#x2019;s Tour in linear time
and makes even large boards tractable.</p>
</div>
<div class="paragraph">
<p>So as a <em>final</em> challenge problem on today&#x2019;s lab we&#x2019;ll let you give Warnsdorff&#x2019;s
rule a try.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<a class="anchor" id="mp4"></a><h2>2. MP4 <span class="text-muted">(Remaining Time)</span></h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you have any time left over use it to work on
<a href="/MP/2019/spring/4/">MP4</a>.
It&#x2019;s due in less than two weeks and it&#x2019;s <em>not easy</em>.</p>
</div>
</div>
</div>
<div class="sect1">
<a class="anchor" id="done"></a><h2>3. Before You Leave</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Don&#x2019;t leave lab until</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You&#x2019;ve completed our in-lab recursion homework problem.</p>
</li>
<li>
<p>You&#x2019;ve made some more progress on <a href="/MP/2019/spring/4/">MP4</a>&#x2026;&#x200B;</p>
</li>
<li>
<p>And so has everyone else in your lab!</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you need more help completing the tasks above please come to
<a href="/info/2019/spring/syllabus/#calendar">office hours</a>
or post on the {forum}.</p>
</div>
</div>
</div>

    </main>
  </div>
</div>

<div id="cs124">
  <div>
    <span class="h3">CS 125 is now <a href="https://cs124.org" target="_blank" class="external">CS 124</a></span>
  </div>
  <div>
    <p style="font-size:0.8em;">
      This site is no longer maintained, may contain incorrect information, and
      may not function properly.
    </p>
  </div>
</div>

<div class="container hidden-print">
  <div class="row" style="margin-top: 10px; margin-bottom: 20px;">
    <div class="col-xs-12">
      <hr>
    </div>
    <div class="small col-xs-12 col-md-4 col-md-offset-4 text-center">
      Created 10/24/2021 <br>
      Updated 10/24/2021
    </div>
    <div class="small col-xs-12 col-md-4 text-center">
      <a class="link_exception external" href="https://github.com/cs125-illinois/www-old/commit/a44ff35d0c2e1d398d433871ed7054b54227db14" target="_blank">Commit <code>a44ff35</code></a>
      //
      <a class="link_exception external" href="https://github.com/cs125-illinois/www-old//commits/master/src/lab/2019/spring/10.adoc" target="_blank">History</a> //
      <a class="link_exception external" href="https://github.com/cs125-illinois/www-old/blob/master/src/lab/2019/spring/10.adoc" target="_blank">View</a>
      <br>
      Built 10/24/2021 @ 21:29 EDT
    </div>
  </div>
</div>








</body></html><!--
  vim: et:ts=2:sw=2:ft=html
--><!--
  vim: et:ts=2:sw=2:ft=html
-->